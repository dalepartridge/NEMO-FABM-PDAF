# ----------------------- FCM extract configuration file -----------------------
cfg::type                   bld
cfg::version                1.0


# ------------------------------------------------------------------------------
# Build information
# ------------------------------------------------------------------------------

# INC /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/TOOLS/COMPILE/arch_nemo.fcm # Start

#==========================================================
#    Automatically generated by Fcheck_archfile.sh from
#    /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/ARCH/arch-X86_ARCHER2-Cray-FABM.fcm
#==========================================================

# compiler options for Archer CRAY XC-30 (using crayftn compiler)
#
# NCDF_HOME   root directory containing lib and include subdirectories for netcdf4
# HDF5_HOME   root directory containing lib and include subdirectories for HDF5
# XIOS_HOME   root directory containing lib for XIOS
# OASIS_HOME  root directory containing lib for OASIS
#
# NCDF_INC    netcdf4 include file
# NCDF_LIB    netcdf4 library
# XIOS_INC    xios include file    (taken into accound only if key_iomput is activated)
# XIOS_LIB    xios library         (taken into accound only if key_iomput is activated)
# OASIS_INC   oasis include file   (taken into accound only if key_oasis3 is activated)
# OASIS_LIB   oasis library        (taken into accound only if key_oasis3 is activated)
#
# FC          Fortran compiler command
# FCFLAGS     Fortran compiler flags
# FFLAGS      Fortran 77 compiler flags
# LD          linker
# LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries
# FPPFLAGS    pre-processing flags
# AR          assembler
# ARFLAGS     assembler flags
# MK          make
# USER_INC    complete list of include files
# USER_LIB    complete list of libraries to pass to the linker
# CC          C compiler used to compile conv for AGRIF
# CFLAGS      compiler flags used with CC
#
# Note that:
#  - unix variables $... are accpeted and will be evaluated before calling fcm.
#  - fcm variables are starting with a % (and not a $)
#
%NCDF_HOME                  /opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1
%HDF5_HOME                  /opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1
%XIOS_HOME                  /work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1
%PDAF_HOME                  /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116
%FABM_HOME                  /work/n01/n01/dapa/NCEO/PDAF/code/build/FABM

#OASIS_HOME

%NCDF_INC                   -I/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/include -I/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/include
%NCDF_LIB                   -L/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/lib -L/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/lib -lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lz
%XIOS_INC                   -I/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/inc
%XIOS_LIB                   -L/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/lib -lxios
%PDAF_INC                   -I/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/include
%PDAF_LIB                   -L/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/lib -lpdaf-d
#OASIS_INC           -I%OASIS_HOME/build/lib/mct -I%OASIS_HOME/build/lib/psmile.MPI1
#OASIS_LIB           -L%OASIS_HOME/lib -lpsmile.MPI1 -lmct -lmpeu -lscrip


%FABM_INC                   -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include
%FABM_LIB                   -L/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/lib -lfabm

%CPP                        cpp
%FC                         ftn
%FCFLAGS                    -em -s integer32 -s real64 -O 1 -hflex_mp=intolerant
%FFLAGS                     -em -s integer32 -s real64 -O 1 -hflex_mp=intolerant
#%FCFLAGS             -em -s integer32 -s real64 -O0 -e0 -eZ
#%FFLAGS              -em -s integer32 -s real64 -O0 -e0 -eZ
%LD                         CC -Wl,--allow-multiple-definition
%FPPFLAGS                   -P -traditional -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include
%LDFLAGS                    -lmpifort_cray
%AR                         ar
%ARFLAGS                    -r
%MK                         gmake
%USER_INC                   -I/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/inc -I/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/include -I/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/include -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include -I/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/include
%USER_LIB                   -L/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/lib -lxios -L/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/lib -L/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/lib -lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lz -L/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/lib -lfabm -L/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/lib -lpdaf-d
#USER_INC            %XIOS_INC %OASIS_INC %NCDF_INC
#USER_LIB            %XIOS_LIB %OASIS_LIB %NCDF_LIB

%CC                         cc
%CFLAGS                     -O0
# INC /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/TOOLS/COMPILE/arch_nemo.fcm # End
# INC /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/TOOLS/COMPILE/cpp.fcm # Start
bld::tool::fppkeys          key_mpp_mpi key_dynspg_flt key_vvl key_ldfslp key_traldf_c2d key_zdftke key_zdftmx key_trabbl key_lim2 key_zdfddm key_mpp_rep key_nosignedzero key_iomput key_bbl_old_nonconserve key_top key_fabm key_dynldf_c3d key_traldf_eiv key_diaeiv key_USE_PDAF
# INC /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/TOOLS/COMPILE/cpp.fcm # End

search_src                  1

src::ioipsl                 /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/EXTERNAL/IOIPSL/src
src::nemo                   /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/CONFIG/ORCA1_LIM_FABM_PDAF_BLD_SCRATCH/WORK

bld::target                 nemo.exe
bld::exe_dep                


dir::root                   /work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/NEMOGCM/CONFIG/ORCA1_LIM_FABM_PDAF_BLD_SCRATCH/BLD


bld::tool::cpp              cpp
bld::tool::fpp              cpp
bld::tool::fc               ftn
bld::tool::fflags           -em -s integer32 -s real64 -O 1 -hflex_mp=intolerant -I/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/inc -I/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/include -I/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/include -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include -I/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/include
bld::tool::ld               CC -Wl,--allow-multiple-definition
bld::tool::ldflags          -lmpifort_cray -L/work/n01/n01/dapa/NCEO/PDAF/code/build/XIOS1/lib -lxios -L/opt/cray/pe/hdf5-parallel/1.12.0.2/CRAYCLANG/9.1/lib -L/opt/cray/pe/netcdf-hdf5parallel/4.7.4.2/CRAYCLANG/9.1/lib -lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lz -L/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/lib -lfabm -L/work/n01/n01/dapa/NCEO/PDAF/code/clone/NEMO-FABM-PDAF/PDAF_V116/lib -lpdaf-d
bld::tool::ar               ar
bld::tool::arflags          -r
bld::tool::make             gmake

# Pre-process code before analysing dependencies
bld::pp::ioipsl             1
bld::pp::nemo               1
bld::tool::fppflags::nemo   -P -traditional -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include
bld::tool::fppflags::ioipsl -P -traditional -I/work/n01/n01/dapa/NCEO/PDAF/code/build/FABM/include

# Ignore the following dependencies
bld::excl_dep               inc::netcdf.inc
bld::excl_dep               inc::VT.inc
bld::excl_dep               use::netcdf
bld::excl_dep               use::xios
bld::excl_dep               h::netcdf.inc
bld::excl_dep               h::mpif.h
bld::excl_dep               inc::mpif.h
bld::excl_dep               inc::mpe_logf.h
bld::excl_dep               use::mpi
bld::excl_dep               use::mod_oasis
bld::excl_dep               use::mkl_dfti
# +++>>> FABM
bld::excl_dep               use::fabm
bld::excl_dep               use::fabm_config
bld::excl_dep               use::fabm_driver
bld::excl_dep               use::fabm_types
bld::excl_dep               use::fabm_version
bld::excl_dep               use::fabm_standard_variables
# <<<+++ FABM
# Don't generate interface files
bld::tool::geninterface     none

# Allow ".h90" as an extension for CPP include files
bld::infile_ext::h90        CPP::INCLUDE

# extension for module output
bld::outfile_ext::mod       .mod

# rename executable to nemo.exe
bld::exe_name::model        nemo.exe

